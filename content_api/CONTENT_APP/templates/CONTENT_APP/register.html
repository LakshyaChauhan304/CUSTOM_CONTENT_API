{% extends "CONTENT_APP/base.html" %}
{% block content %}
<h2>Register User</h2>

<form id="registerForm">
  <label>Username</label>
  <input name="username" required />

  <label>Email</label>
  <input name="email" type="email" />

  <label>First name</label>
  <input name="first_name" />

  <label>Last name</label>
  <input name="last_name" />

  <label>Password</label>
  <input name="password" type="password" required />

  <button type="submit">Register</button>
</form>

<h3>Response</h3>
<pre id="registerResult"></pre>

<script>
document.getElementById('registerForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const f = e.target;
  const payload = {
    username: f.username.value,
    email: f.email.value,
    first_name: f.first_name.value,
    last_name: f.last_name.value,
    password: f.password.value
  };

  const res = await fetch('/content/register/', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify(payload)
  });

  const data = await res.json();
  document.getElementById('registerResult').textContent = JSON.stringify(data, null, 2);
});
</script>
{% endblock %}
